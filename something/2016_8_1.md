# 如何在后台开启轻量级线程来定时更新共享内存?

Q:

    现在有一个场景：需要定时（30s）从redis里面拉取数据灌入lua cache共享内存。
    我现在是用 ngx.timer 这个 API 来实现的，请问这会不会有问题？因为对 
    ngx.timer 这个 API 不是很了解看了文档说是：在后台开启了一个轻量级线程来
    执行，与原来的请求脱钩。我这边的场景就是拉取灌入的操作不能阻塞 worker。

    1. 请问这样能够满足需求吗？会不会有阻塞问题？
    2. ngx.timer 我现在是放在 content_by_lua_file 中的，需要访问
    接口才能启动，有没有可以开启 worker 的时候就启动 timer 的办法（我
    试了放在 init_by_lua_file 里面好像不生效。。。）
    3. 这个 timer 是每个 worker 里面都会有还是只有一个 worker 
    里面会有呢？（看文档貌似是只有一个worker里面会有，这也是我的需求）